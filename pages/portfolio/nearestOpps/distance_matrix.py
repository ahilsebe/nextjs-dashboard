from sklearn.cluster import AgglomerativeClustering
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

import requests
import json
import urllib.request


distance_matrix = [[0, 1185, 1534, 906, 1426, 1388, 1263, 1297, 958, 1207, 1319, 1589, 1526, 695, 1208, 1312], [1280, 0, 611, 895, 503, 465, 839, 274, 882, 596, 864, 666, 603, 986, 910, 867], [1618, 616, 0, 1228, 427, 139, 1011, 466, 1215, 827, 648, 365, 213, 1324, 820, 848], [1022, 914, 1202, 0, 957, 1056, 390, 897, 82, 478, 883, 1220, 1158, 536, 737, 816], [1575, 611, 453, 973, 0, 307, 680, 486, 959, 589, 412, 493, 430, 1186, 589, 628], [1480, 477, 145, 1090, 288, 0, 872, 377, 1076, 688, 617, 360, 287, 1185, 794, 744], [1382, 894, 1029, 395, 716, 883, 0, 766, 382, 290, 660, 1146, 1016, 836, 514, 596], [1366, 277, 482, 911, 481, 411, 725, 0, 898, 482, 743, 647, 574, 1071, 790, 831], [1040, 902, 1189, 90, 944, 1044, 378, 884, 0, 465, 871, 1208, 1145, 500, 724, 803], [1264, 618, 822, 462, 598, 677, 253, 490, 449, 0, 564, 841, 778, 903, 453, 566], [1459, 724, 609, 955, 349, 561, 697, 674, 941, 647, 0, 572, 572, 1016, 315, 346], [1638, 636, 364, 1230, 486, 339, 1084, 618, 1217, 828, 585, 0, 285, 1319, 757, 784], [1560, 558, 205, 1151, 407, 313, 955, 592, 1138, 750, 613, 291, 0, 1240, 785, 815], [791, 1020, 1368, 555, 1227, 1223, 842, 1132, 537, 930, 972, 1386, 1323, 0, 861, 964], [1301, 966, 850, 769, 610, 778, 580, 838, 756, 533, 241, 813, 813, 859, 0, 113], [1397, 918, 895, 871, 666, 732, 609, 868, 858, 647, 322, 866, 858, 954, 125, 0]]
coordinates = [[35.051449066038764, -89.79269032781694],
    [35.09365091274959, -90.01987618465554],
    [35.142679988163444, -90.05190400742421],
    [35.103480838828425, -89.91968285396665],
    [35.13876746710072, -90.01018698650833],
    [35.13935935628264, -90.03774712883613],
    [35.12308311033711, -89.94079885767222],
    [35.11592581738372, -90.03123551349167],
    [35.10670470419284, -89.9169593576722],
    [35.116655096216114, -89.96052198465554],
    [35.15414738334794, -89.98870228650831],
    [35.15375986820373, -90.04348327116388],
    [35.14928875986129, -90.05310624232776],
    [35.09840244757742, -89.8648445288361],
    [35.154818600081406, -89.964770440475],
    [35.15926288550419, -89.9605694]]

df = pd.DataFrame(coordinates, columns =['lat','lng'])
print(df)

plt.scatter(df['lng'],df['lat'],c='green',s=40)
plt.show()

X = np.array(distance_matrix)
clustering = AgglomerativeClustering().fit(X)
AgglomerativeClustering()
print(clustering.labels_)

df['cluster_label'] = clustering.labels_


print(df)

plt.scatter(df['lng'],df['lat'],c=df['cluster_label'],s=40)
plt.show()

